# コーディング規約

## 目次
1. [全般的なガイドライン](#1-全般的なガイドライン)
2. [ファイル構成](#2-ファイル構成)
3. [命名規則](#3-命名規則)
4. [TypeScript固有のルール](#4-typescript固有のルール)
5. [React固有のルール](#5-react固有のルール)
6. [スタイリング](#6-スタイリング)
7. [エラー処理](#7-エラー処理)
8. [非同期処理](#8-非同期処理)
9. [テスト](#9-テスト)
10. [コードフォーマット](#10-コードフォーマット)
11. [バージョン管理](#11-バージョン管理)
12. [ドキュメンテーション](#12-ドキュメンテーション)
13. [パフォーマンス最適化](#13-パフォーマンス最適化)
14. [セキュリティ](#14-セキュリティ)

## 1. 全般的なガイドライン

- **DRY (Don't Repeat Yourself)**: コードの重複を避ける
- **KISS (Keep It Simple, Stupid)**: シンプルで理解しやすいコードを書く
- **YAGNI (You Aren't Gonna Need It)**: 必要のない機能は実装しない
- **可読性**: 自己文書化コードを目指す
- **コメント**: 必要最小限に留め、コード自体で意図を表現する

## 2. ファイル構成

- 1ファイルにつき1つの主要な機能やクラスを定義
- ファイル名は内容を適切に表現（例：`UserAuthentication.ts`）
- ディレクトリ構造は機能やモジュールごとに整理

## 3. 命名規則

| 項目 | 規則 | 例 |
|------|------|-----|
| 変数名 | キャメルケース | `userName` |
| 関数名 | キャメルケース | `getUserData()` |
| クラス名 | パスカルケース | `UserAuthentication` |
| 定数 | 大文字のスネークケース | `MAX_LOGIN_ATTEMPTS` |
| プライベートプロパティ/メソッド | アンダースコアで始める | `_privateMethod()` |

## 4. TypeScript固有のルール

- 型定義は可能な限り具体的に行う
- `any`型の使用は避け、必要な場合はコメントで理由を説明
- インターフェースの名前は`I`で始めない
- ユニオン型とインターセクション型を適切に活用
- null許容型（`Type | null`）を使用し、undefinedとの混在を避ける

## 5. React固有のルール

- コンポーネントは小さく保ち、単一責任の原則に従う
- Hooksを積極的に活用し、クラスコンポーネントの使用を最小限に
- Propsの型定義を必ず行う
- メモ化（`useMemo`, `useCallback`）を適切に使用
- コンポーネントのファイル名は`.tsx`とし、パスカルケースで命名

## 6. スタイリング

- TailwindCSSを使用する場合、クラス名の順序は一貫性を保つ
- カスタムCSSは最小限に抑え、必要な場合はモジュールCSSを使用

## 7. エラー処理

- try-catchブロックを適切に使用
- エラーオブジェクトは適切に型付けし、カスタムエラークラスを活用
- ユーザー向けエラーメッセージは明確で親切なものにする

## 8. 非同期処理

- `async/await`を優先して使用
- 複数の非同期処理を並行して行う場合は、`Promise.all`を活用

## 9. テスト

- 全ての新機能に対してユニットテストを書く
- テストファイル名は`[対象ファイル名].test.ts(x)`とする
- テストケースは明確で具体的な名前をつける
- モックとスタブを適切に使用してテストの独立性を保つ

## 10. コードフォーマット

- ESLintとPrettierを使用して、コードスタイルの一貫性を保つ
- インデントはスペース2つ
- 行の最大長は100文字
- 関数やクラスの間は1行空ける

## 11. バージョン管理

- コミットメッセージは具体的で明確に書く
- 機能ごとにブランチを作成し、Pull Requestで変更を提案
- マージ前にコードレビューを必ず行う

## 12. ドキュメンテーション

- 複雑なロジックには必ずコメントを付ける
- PublicなAPI関数には必ずJSDocコメントを付ける
- README.mdファイルを適切に維持し、プロジェクトの概要、セットアップ手順、主要機能を説明

## 13. パフォーマンス最適化

- Reactのメモ化機能を適切に使用し、不要なレンダリングを避ける
- 大きなデータセットを扱う際は、仮想化ライブラリ（例：react-window）を検討
- 画像の最適化とLazy Loadingを実装

## 14. セキュリティ

- ユーザー入力は必ずサニタイズする
- 機密情報（APIキーなど）をコードにハードコーディングしない
- クロスサイトスクリプティング（XSS）対策を徹底する
